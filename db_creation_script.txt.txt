CREATE SCHEMA `jiujitsuassistant` ;


CREATE TABLE `jiujitsuassistant`.`techniquegroups` (
  `group_id` INT NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(45) NULL,
  PRIMARY KEY (`group_id`));



CREATE TABLE `jiujitsuassistant`.`techniques` (
  `technique_id` INT NOT NULL AUTO_INCREMENT,
  `group_id` INT NULL,
  `name` VARCHAR(45) NULL,
  `date_learned` DATE NULL,
  `belt_level` VARCHAR(45) NULL,
  PRIMARY KEY (`technique_id`));


CREATE TABLE `jiujitsuassistant`.`transitions` (
  `technique_from_id` INT NULL,
  `technique_to_id` INT NULL,
  `conditions` VARCHAR(450) NULL);

ALTER TABLE `jiujitsuassistant`.`transitions` 
ADD INDEX `fk_technique_from_idx` (`technique_from_id` ASC),
ADD INDEX `fk_technique_to_idx` (`technique_to_id` ASC);
ALTER TABLE `jiujitsuassistant`.`transitions` 
ADD CONSTRAINT `fk_technique_from`
  FOREIGN KEY (`technique_from_id`)
  REFERENCES `jiujitsuassistant`.`techniques` (`technique_id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION,
ADD CONSTRAINT `fk_technique_to`
  FOREIGN KEY (`technique_to_id`)
  REFERENCES `jiujitsuassistant`.`techniques` (`technique_id`)
  ON DELETE NO ACTION
  ON UPDATE NO ACTION;
